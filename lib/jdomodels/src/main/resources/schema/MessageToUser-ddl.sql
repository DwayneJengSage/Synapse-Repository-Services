CREATE TABLE IF NOT EXISTS `MESSAGE_TO_USER` (
  `MESSAGE_ID` bigint(20) NOT NULL,
  `ROOT_MESSAGE_ID` bigint(20) NOT NULL,
  `IN_REPLY_TO` bigint(20) DEFAULT NULL, 
  `SUBJECT` blob, 
  `NOTIFICATIONS_ENDPOINT` varchar(256) DEFAULT NULL, 
  `PROFILE_SETTING_ENDPOINT` varchar(256) DEFAULT NULL, 
  `WITH_UNSUBSCRIBE_LINK` boolean DEFAULT FALSE, 
  `WITH_PROFILE_SETTING_LINK` boolean DEFAULT FALSE,
  `IS_NOTIFICATION_MESSAGE` boolean DEFAULT FALSE, 
  `TO` varchar(1024) DEFAULT NULL, 
  `CC` varchar(1024) DEFAULT NULL, 
  `BCC` varchar(1024) DEFAULT NULL, 
  `SENT` boolean, 
  PRIMARY KEY (`MESSAGE_ID`),
  CONSTRAINT `MESSAGE_TO_USER_FK` FOREIGN KEY (`MESSAGE_ID`) REFERENCES `MESSAGE_CONTENT` (`ID`) ON DELETE CASCADE, 
  CONSTRAINT `MESSAGE_TO_USER_SELF_FK` FOREIGN KEY (`ROOT_MESSAGE_ID`) REFERENCES `MESSAGE_TO_USER` (`MESSAGE_ID`) ON DELETE CASCADE, 
  CONSTRAINT `MESSAGE_TO_USER_IN_REPLY_TO_FK` FOREIGN KEY (`IN_REPLY_TO`) REFERENCES `MESSAGE_CONTENT` (`ID`) ON DELETE CASCADE
)
